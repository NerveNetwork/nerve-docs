(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{366:function(s,e,a){"use strict";a.r(e);var n=a(33),r=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"快速安装节点钱包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速安装节点钱包"}},[s._v("#")]),s._v(" 快速安装节点钱包")]),s._v(" "),a("h2",{attrs:{id:"linux下安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux下安装docker"}},[s._v("#")]),s._v(" Linux下安装docker")]),s._v(" "),a("h3",{attrs:{id:"使用root权限用户登录系统并查看系统内核版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用root权限用户登录系统并查看系统内核版本"}},[s._v("#")]),s._v(" 使用root权限用户登录系统并查看系统内核版本")]),s._v(" "),a("p",[s._v("返回值大于3.10即可")]),s._v(" "),a("p",[s._v("命令：uname -r")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@hope-2 /]# uname -r\n3.10.0-957.27.2.el7.x86_64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"确保yum为最新版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#确保yum为最新版本"}},[s._v("#")]),s._v(" 确保yum为最新版本")]),s._v(" "),a("p",[s._v("命令：yum update")]),s._v(" "),a("h3",{attrs:{id:"添加yum仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加yum仓库"}},[s._v("#")]),s._v(" 添加yum仓库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tee /etc/yum.repos.d/docker.repo <<-'EOF'\n[dockerrepo]\nname=Docker Repository\nbaseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/\nenabled=1\ngpgcheck=1\ngpgkey=https://yum.dockerproject.org/gpg\nEOF\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),a("p",[s._v("分别执行以下用例进行安装：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install -y yum-utils device-mapper-persistent-data lvm2\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum makecache fast\nyum -y install docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动docker"}},[s._v("#")]),s._v(" 启动docker")]),s._v(" "),a("p",[s._v("命令：systemctl start docker.service")]),s._v(" "),a("h3",{attrs:{id:"检查是否成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检查是否成功"}},[s._v("#")]),s._v(" 检查是否成功")]),s._v(" "),a("p",[s._v("使用命令docker version 查看，出现Client和Server说明docker安装启动成功")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@hope-2 /]# docker version\nClient: Docker Engine - Community\n Version:           19.03.11\n API version:       1.40\n Go version:        go1.13.10\n Git commit:        42e35e61f3\n Built:             Mon Jun  1 09:13:48 2020\n OS/Arch:           linux/amd64\n Experimental:      false\n\nServer: Docker Engine - Community\n Engine:\n  Version:          19.03.11\n  API version:      1.40 (minimum version 1.12)\n  Go version:       go1.13.10\n  Git commit:       42e35e61f3\n  Built:            Mon Jun  1 09:12:26 2020\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.2.13\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\n runc:\n  Version:          1.0.0-rc10\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\n docker-init:\n  Version:          0.18.0\n  GitCommit:        fec3683\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("h3",{attrs:{id:"设置开机自动启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自动启动"}},[s._v("#")]),s._v(" 设置开机自动启动")]),s._v(" "),a("p",[s._v("命令：sudo systemctl enable docker")]),s._v(" "),a("h2",{attrs:{id:"windows下安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows下安装docker"}},[s._v("#")]),s._v(" Windows下安装docker")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/quick-start/set-up-environment?tabs=Windows-Server",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考链接"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"启动nerve节点钱包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动nerve节点钱包"}},[s._v("#")]),s._v(" 启动Nerve节点钱包")]),s._v(" "),a("h3",{attrs:{id:"钱包启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#钱包启动"}},[s._v("#")]),s._v(" 钱包启动")]),s._v(" "),a("p",[s._v("节点钱包带有主链运行所需的最基础功能，并包括nerve-api（http的开发接口）模块，用户只能通过命令行与钱包进行交互。")]),s._v(" "),a("p",[s._v("运行命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run \\\n       --name nerve-wallet \\\n       -d \\\n       -p 17001:17001 \\\n       -p 17002:17002 \\\n       -p 17004:17004 \\\n       -v `pwd`/data:/data \\\n       -v `pwd`/logs:/nuls/Logs \\\n       nervenetwork/nerve-wallet-node:beta-1.0.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("17001 Nerve链协议通信端口（必选）")]),s._v(" "),a("p",[s._v("17002 Nerve链跨链协议端口（必选）")]),s._v(" "),a("p",[s._v("17004 http api接口使用端口（可选）")]),s._v(" "),a("p",[s._v("/nuls/data 数据存储目录")]),s._v(" "),a("p",[s._v("/nuls/Logs 日志存储目录")]),s._v(" "),a("p",[s._v("PS：请务必在服务器防火墙设置开启以上端口，否则会影响区块同步")]),s._v(" "),a("h3",{attrs:{id:"进入钱包及钱包管理命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入钱包及钱包管理命令"}},[s._v("#")]),s._v(" 进入钱包及钱包管理命令")]),s._v(" "),a("p",[s._v("进入钱包命令行：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it nerve-wallet cmd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("进入钱包目录：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it nerve-wallet bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看模块启动情况：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it nerve-wallet check-status\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("停止钱包：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker stop nerve-wallet\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动钱包：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker start nerve-wallet\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启钱包：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker restart nerve-wallet\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"docker-compose安装启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose安装启动"}},[s._v("#")]),s._v(" docker-compose安装启动")]),s._v(" "),a("p",[s._v("docker安装启动成功之后，执行下面两条命令安装docker-compose并赋予权限：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo curl -L "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("安装成功之后，在某个目录（随意）下新建一个文件docker-compose.yml，写入下面的代码并保存：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("version: '3.1'\nservices:\n  nerve:\n    image: nervenetwork/nerve-wallet-node:beta-1.0.0\n    restart: always\n    container_name: nerve-wallet\n    ports:\n      # 端口映射\n      - 17001:17001\n      - 17002:17002\n      - 17004:17004\n    volumes:\n      # 数据库目录映射\n      - ./data:/nuls/data\n      - ./logs:/nuls/Logs\n    environment:\n      TIME_ZONE: Asia/Shanghai\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("钱包启动、停止命令：")]),s._v(" "),a("p",[s._v("启动：docker-compose up -d")]),s._v(" "),a("p",[s._v("停止：docker-compose down")]),s._v(" "),a("h2",{attrs:{id:"nerve节点钱包更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nerve节点钱包更新"}},[s._v("#")]),s._v(" Nerve节点钱包更新")]),s._v(" "),a("p",[s._v("首先在服务器上停止已运行的镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker stop nerve-wallet\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用命令查看钱包的容器并且根据容器ID删除该容器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@c-7 ~]# docker ps -a\nCONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS                        PORTS               NAMES\n9b5f87f013fa        a26aa7ced583             "/usr/local/bin/entr…"   15 hours ago        Exited (137) 55 seconds ago                       nerve-wallet\n\n[root@c-7 ~]# docker rm 9b5f87f013fa\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("重新拉取镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull nervenetwork/nerve-wallet-node:beta-1.0.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("再次启动nerve节点钱包即可，重复三、四操作（如果需要清数据，请删除root目录下的data、logs目录）")])])}),[],!1,null,null,null);e.default=r.exports}}]);